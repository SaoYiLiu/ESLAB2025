ST Edge AI Core v2.2.0-20266 2adc00962
Created date          : 2025-12-01 00:11:03
Parameters            : generate --target stm32l4 --name network -m C:/image_reg_test/model_64_gray_float.tflite --compression medium --verbosity 1 --workspace C:/Users/a0979/AppData/Local/Temp/mxAI_workspace1901940769938009543954435708038664 --output C:/Users/a0979/.stm32cubemx/network_output

Exec/report summary (generate)
------------------------------------------------------------------------------------------------------------
model file         :   C:\image_reg_test\model_64_gray_float.tflite                                         
type               :   tflite                                                                               
c_name             :   network                                                                              
compression        :   medium                                                                               
options            :   allocate-inputs, allocate-outputs                                                    
optimization       :   balanced                                                                             
target/series      :   stm32l4                                                                              
workspace dir      :   C:\Users\a0979\AppData\Local\Temp\mxAI_workspace1901940769938009543954435708038664   
output dir         :   C:\Users\a0979\.stm32cubemx\network_output                                           
model_fmt          :   float                                                                                
model_name         :   model_64_gray_float                                                                  
model_hash         :   0xd5d607a14fb47a5cd858bc645fce57c2                                                   
params #           :   23,491 items (91.76 KiB)                                                             
------------------------------------------------------------------------------------------------------------
input 1/1          :   'serving_default_ke..nsor_20050', f32(1x64x64x1), 16.00 KBytes, activations          
output 1/1         :   'nl_8', f32(1x3), 12 Bytes, activations                                              
macc               :   10,260,832                                                                           
weights (ro)       :   93,356 B (91.17 KiB) (1 segment) / -608(-0.6%) vs float model                        
activations (rw)   :   84,324 B (82.35 KiB) (1 segment) *                                                   
ram (total)        :   84,324 B (82.35 KiB) = 84,324 + 0 + 0                                                
------------------------------------------------------------------------------------------------------------
(*) 'input'/'output' buffers are allocated in the activations buffer

Model name - model_64_gray_float
------ ------------------------------------------ ---------------------- --------------- ----------- -------------------------------- --- ------------------ ----------------------- --------------------- 
m_id   layer (type,original)                      oshape                 param/size             macc                     connected to   | c_size             c_macc                  c_type                
------ ------------------------------------------ ---------------------- --------------- ----------- -------------------------------- --- ------------------ ----------------------- --------------------- 
0      serving_default_ke..nsor_20050 (Input, )   [b:1,h:64,w:64,c:1]                                                                   |                                            
       conv2d_0 (Conv2D, CONV_2D)                 [b:1,h:64,w:64,c:16]   160/640             589,840   serving_default_ke..nsor_20050   | -640(-100.0%)      -589,840(-100.0%)       
       nl_0_nl (Nonlinearity, CONV_2D)            [b:1,h:64,w:64,c:16]                        65,536                         conv2d_0   |                    -65,536(-100.0%)        
------ ------------------------------------------ ---------------------- --------------- ----------- -------------------------------- --- ------------------ ----------------------- --------------------- 
1      pool_1 (Pool, MAX_POOL_2D)                 [b:1,h:32,w:32,c:16]                        65,536                          nl_0_nl   | +640(+100.0%)      +655,376(+1000.0%)      Conv2D_[0]            
------ ------------------------------------------ ---------------------- --------------- ----------- -------------------------------- --- ------------------ ----------------------- --------------------- 
2      conv2d_2 (Conv2D, CONV_2D)                 [b:1,h:32,w:32,c:32]   4,640/18,560      4,718,624                           pool_1   | -18,560(-100.0%)   -4,718,624(-100.0%)     
       nl_2_nl (Nonlinearity, CONV_2D)            [b:1,h:32,w:32,c:32]                        32,768                         conv2d_2   |                    -32,768(-100.0%)        
------ ------------------------------------------ ---------------------- --------------- ----------- -------------------------------- --- ------------------ ----------------------- --------------------- 
3      pool_3 (Pool, MAX_POOL_2D)                 [b:1,h:16,w:16,c:32]                        32,768                          nl_2_nl   | +18,560(+100.0%)   +4,751,392(+14500.1%)   Conv2D_[1]            
------ ------------------------------------------ ---------------------- --------------- ----------- -------------------------------- --- ------------------ ----------------------- --------------------- 
4      conv2d_4 (Conv2D, CONV_2D)                 [b:1,h:16,w:16,c:64]   18,496/73,984     4,718,656                           pool_3   | -73,984(-100.0%)   -4,718,656(-100.0%)     
       nl_4_nl (Nonlinearity, CONV_2D)            [b:1,h:16,w:16,c:64]                        16,384                         conv2d_4   |                    -16,384(-100.0%)        
------ ------------------------------------------ ---------------------- --------------- ----------- -------------------------------- --- ------------------ ----------------------- --------------------- 
5      pool_5 (Pool, MAX_POOL_2D)                 [b:1,h:8,w:8,c:64]                          16,384                          nl_4_nl   | +73,984(+100.0%)   +4,735,040(+28900.4%)   Conv2D_[2]            
------ ------------------------------------------ ---------------------- --------------- ----------- -------------------------------- --- ------------------ ----------------------- --------------------- 
6      pool_6 (Pool, MEAN)                        [b:1,h:1,w:1,c:64]                           4,096                           pool_5   |                                            Pool_[3]              
       reshape_6_reshape (Reshape, MEAN)          [b:1,c:64]                                                                   pool_6   |                                            
------ ------------------------------------------ ---------------------- --------------- ----------- -------------------------------- --- ------------------ ----------------------- --------------------- 
7      arith_constant5 (Placeholder, )            [b:3,c:64]             192/768                                                        | -596(-77.6%)       +195(+100.0%)           Dense_[4]             
       arith_constant6 (Placeholder, )            [b:3]                  3/12                                                           | -12(-100.0%)                               
       gemm_7 (Gemm, FULLY_CONNECTED)             [b:1,c:3]                                      195                reshape_6_reshape   |                    -195(-100.0%)           
                                                                                                                      arith_constant5   | 
                                                                                                                      arith_constant6   | 
------ ------------------------------------------ ---------------------- --------------- ----------- -------------------------------- --- ------------------ ----------------------- --------------------- 
8      nl_8 (Nonlinearity, SOFTMAX)               [b:1,c:3]                                       45                           gemm_7   |                                            Nonlinearity_[o][5]   
------ ------------------------------------------ ---------------------- --------------- ----------- -------------------------------- --- ------------------ ----------------------- --------------------- 
model/c-model: macc=10,260,832/10,260,832  weights=93,964/93,356 -608(-0.6%) activations=--/84,324 io=--/0



Generated C-graph summary
------------------------------------------------------------------------------------------------------------------------
model name            : model_64_gray_float
c-name                : network
c-node #              : 6
c-array #             : 21
activations size      : 84324 (1 segment)
weights size          : 93356 (1 segment)
macc                  : 10260832
inputs                : ['serving_default_keras_tensor_20050_output']
outputs               : ['nl_8_output']

C-Arrays (21)
------ ------------------------------------------- ------------- ------------------------- ------------------ --------- 
c_id   name (*_array)                              item/size     domain/mem-pool           c-type             comment   
------ ------------------------------------------- ------------- ------------------------- ------------------ --------- 
0      conv2d_0_bias                               16/64         weights/weights           const float                  
1      conv2d_0_output                             16384/65536   activations/**default**   float                        
2      conv2d_0_scratch0                           9/36          activations/**default**   float                        
3      conv2d_0_scratch1                           2048/8192     activations/**default**   float                        
4      conv2d_0_weights                            144/576       weights/weights           const float                  
5      conv2d_2_bias                               32/128        weights/weights           const float                  
6      conv2d_2_output                             8192/32768    activations/**default**   float                        
7      conv2d_2_scratch0                           144/576       activations/**default**   float                        
8      conv2d_2_scratch1                           2048/8192     activations/**default**   float                        
9      conv2d_2_weights                            4608/18432    weights/weights           const float                  
10     conv2d_4_bias                               64/256        weights/weights           const float                  
11     conv2d_4_output                             4096/16384    activations/**default**   float                        
12     conv2d_4_scratch0                           288/1152      activations/**default**   float                        
13     conv2d_4_scratch1                           2048/8192     activations/**default**   float                        
14     conv2d_4_weights                            18432/73728   weights/weights           const float                  
15     gemm_7_bias                                 3/12          weights/weights           const float                  
16     gemm_7_output                               3/12          activations/**default**   float                        
17     gemm_7_weights                              192/160       weights/weights           const lut4_float             
18     nl_8_output                                 3/12          activations/**default**   float              /output   
19     pool_6_output                               64/256        activations/**default**   float                        
20     serving_default_keras_tensor_20050_output   4096/16384    activations/**default**   float              /input    
------ ------------------------------------------- ------------- ------------------------- ------------------ --------- 

C-Layers (6)
------ ---------------- ---- --------------- --------- ------- ---------------------------------------------- --------------------- 
c_id   name (*_layer)   id   layer_type      macc      rom     tensors                                        shape (array id)      
------ ---------------- ---- --------------- --------- ------- ---------------------------------------------- --------------------- 
0      conv2d_0         1    Conv2D          720912    640     I: serving_default_keras_tensor_20050_output   f32(1x64x64x1) (20)   
                                                               S: conv2d_0_scratch0                                                 
                                                               S: conv2d_0_scratch1                                                 
                                                               W: conv2d_0_weights                            f32(16x3x3x1) (4)     
                                                               W: conv2d_0_bias                               f32(16) (0)           
                                                               O: conv2d_0_output                             f32(1x32x32x16) (1)   
------ ---------------- ---- --------------- --------- ------- ---------------------------------------------- --------------------- 
1      conv2d_2         3    Conv2D          4784160   18560   I: conv2d_0_output                             f32(1x32x32x16) (1)   
                                                               S: conv2d_2_scratch0                                                 
                                                               S: conv2d_2_scratch1                                                 
                                                               W: conv2d_2_weights                            f32(32x3x3x16) (9)    
                                                               W: conv2d_2_bias                               f32(32) (5)           
                                                               O: conv2d_2_output                             f32(1x16x16x32) (6)   
------ ---------------- ---- --------------- --------- ------- ---------------------------------------------- --------------------- 
2      conv2d_4         5    Conv2D          4751424   73984   I: conv2d_2_output                             f32(1x16x16x32) (6)   
                                                               S: conv2d_4_scratch0                                                 
                                                               S: conv2d_4_scratch1                                                 
                                                               W: conv2d_4_weights                            f32(64x3x3x32) (14)   
                                                               W: conv2d_4_bias                               f32(64) (10)          
                                                               O: conv2d_4_output                             f32(1x8x8x64) (11)    
------ ---------------- ---- --------------- --------- ------- ---------------------------------------------- --------------------- 
3      pool_6           6    Pool            4096      0       I: conv2d_4_output                             f32(1x8x8x64) (11)    
                                                               O: pool_6_output                               f32(1x1x1x64) (19)    
------ ---------------- ---- --------------- --------- ------- ---------------------------------------------- --------------------- 
4      gemm_7           7    Dense           195       172     I: pool_6_output                               f32(1x1x1x64) (19)    
                                                               W: gemm_7_weights                              c4(3x64) (17)         
                                                               W: gemm_7_bias                                 f32(3) (15)           
                                                               O: gemm_7_output                               f32(1x3) (16)         
------ ---------------- ---- --------------- --------- ------- ---------------------------------------------- --------------------- 
5      nl_8             8    Nonlinearity    45        0       I: gemm_7_output                               f32(1x3) (16)         
                                                               O: nl_8_output                                 f32(1x3) (18)         
------ ---------------- ---- --------------- --------- ------- ---------------------------------------------- --------------------- 



Number of operations per c-layer
------- ------ --------------------- ------------ -------------- 
c_id    m_id   name (type)                    #op           type 
------- ------ --------------------- ------------ -------------- 
0       1      conv2d_0 (Conv2D)          720,912   smul_f32_f32 
1       3      conv2d_2 (Conv2D)        4,784,160   smul_f32_f32 
2       5      conv2d_4 (Conv2D)        4,751,424   smul_f32_f32 
3       6      pool_6 (Pool)                4,096   smul_f32_f32 
4       7      gemm_7 (Dense)                 195    smul_f32_f4 
5       8      nl_8 (Nonlinearity)             45     op_f32_f32 
------- ------ --------------------- ------------ -------------- 
total                                  10,260,832 

Number of operation types
---------------- ------------ ----------- 
operation type              #           % 
---------------- ------------ ----------- 
smul_f32_f32       10,260,592      100.0% 
smul_f32_f4               195        0.0% 
op_f32_f32                 45        0.0% 

Complexity report (model)
------ ----------------- ------------------------- ------------------------- ------ 
m_id   name              c_macc                    c_rom                     c_id   
------ ----------------- ------------------------- ------------------------- ------ 
1      pool_1            |||                7.0%   |                  0.7%   [0]    
3      pool_3            ||||||||||||||||  46.6%   ||||              19.9%   [1]    
5      pool_5            |||||||||||||||   46.3%   ||||||||||||||||  79.2%   [2]    
6      pool_6            |                  0.0%   |                  0.0%   [3]    
7      arith_constant5   |                  0.0%   |                  0.2%   [4]    
8      nl_8              |                  0.0%   |                  0.0%   [5]    
------ ----------------- ------------------------- ------------------------- ------ 
macc=10,260,832 weights=93,356 act=84,324 ram_io=0
 
 Requested memory size by section - "stm32l4" target
 ------------------------------ -------- -------- ------- -------- 
 module                             text   rodata    data      bss 
 ------------------------------ -------- -------- ------- -------- 
 NetworkRuntime1020_CM4_GCC.a     11,004        0       0        0 
 network.o                           702       48   2,676      196 
 network_data.o                       48       16      88        0 
 lib (toolchain)*                    614       24       0        0 
 ------------------------------ -------- -------- ------- -------- 
 RT total**                       12,368       88   2,764      196 
 ------------------------------ -------- -------- ------- -------- 
 weights                               0   93,360       0        0 
 activations                           0        0       0   84,324 
 io                                    0        0       0        0 
 ------------------------------ -------- -------- ------- -------- 
 TOTAL                            12,368   93,448   2,764   84,520 
 ------------------------------ -------- -------- ------- -------- 
 *  toolchain objects (libm/libgcc*)
 ** RT AI runtime objects (kernels+infrastructure)
  
  Summary - "stm32l4" target
  --------------------------------------------------
               FLASH (ro)      %*   RAM (rw)      % 
  --------------------------------------------------
  RT total         15,220   14.0%      2,960   3.4% 
  --------------------------------------------------
  TOTAL           108,580             87,284        
  --------------------------------------------------
  *  rt/total


Generated files (7)
------------------------------------------------------------------ 
C:\Users\a0979\.stm32cubemx\network_output\network_data_params.h   
C:\Users\a0979\.stm32cubemx\network_output\network_data_params.c   
C:\Users\a0979\.stm32cubemx\network_output\network_data.h          
C:\Users\a0979\.stm32cubemx\network_output\network_data.c          
C:\Users\a0979\.stm32cubemx\network_output\network_config.h        
C:\Users\a0979\.stm32cubemx\network_output\network.h               
C:\Users\a0979\.stm32cubemx\network_output\network.c               
